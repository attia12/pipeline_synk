<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Driver 2 Location Sender</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.2/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<h1>Driver 2 Location Sender</h1>
<label for="latitude2">Latitude:</label>
<input type="text" id="latitude2" value="48.8606"><br>
<label for="longitude2">Longitude:</label>
<input type="text" id="longitude2" value="2.3376"><br>
<button id="sendLocation2">Send Location</button>

<script>
    const socket = new SockJS('http://localhost:8090/ws');
    const stompClient = Stomp.over(socket);
    const jwtToken = "Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJtb2hhbWVkLmFpY2hhb3VpLnRpY0BnbWFpbC5jb20iLCJyb2xlcyI6WyJST0xFX0RSSVZFUiJdLCJ1c2VySWQiOiI2N2ZmNzgyZmE0NDU4NzExMTNmNTlmY2YiLCJpYXQiOjE3NDU4NDY5MTQsImV4cCI6MTc0NTg1MDUxNH0.3SVTdRSWQw82Qul3B39zKofFoDir3e_ze53PCG9dw4M"; // Replace with actual JWT token for Driver 2
    const driverId = "67ff782fa445871113f59fcf"; // Replace with actual Driver 2 ID

    stompClient.connect({'Authorization': jwtToken}, function (frame) {
        console.log('Connected: ' + frame);
        document.getElementById('sendLocation2').addEventListener('click', function() {
            const lat = document.getElementById('latitude2').value;
            const lon = document.getElementById('longitude2').value;
            stompClient.send("/app/driver/update-location", {}, JSON.stringify({
                userId: driverId,
                latitude: parseFloat(lat),
                longitude: parseFloat(lon),
                status: "online"
            }));
        });
    });
</script>
</body>
</html>